<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="images/icon.jpg" />

  <title>Touchy Pinchy Integers</title>

  <link rel="stylesheet" type="text/css" href="css/style.css">
  <script src="libraries/hammer.min.js"></script>
  <script src="libraries/p5.min.js"></script>
  <script src="src/declarations.js"></script>
  <script src="src/functions.js"></script>
  <script src="src/TowerPair.js"></script>

</head>

<body>
  <!-- For Firebase Integration -->

  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";


    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDurL5YF0wm5msdEcKJM_qYT0Y9APa3I_c",
      authDomain: "touchy-pinchy-integers.firebaseapp.com",
      projectId: "touchy-pinchy-integers",
      storageBucket: "touchy-pinchy-integers.firebasestorage.app",
      messagingSenderId: "264851166148",
      appId: "1:264851166148:web:285e8d4ded7ee4d6ae4a91",
      measurementId: "G-EMB6BZ074J"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    // Initialize Realtime Database and get a reference to it
    const db = getFirestore(app);

    // Expose database globally so it can be accessed in sketch.js
    window.db = db;
    window.collection = collection;
    window.addDoc = addDoc;
  </script>

  <!-- DOM ELEMENTS -->
  <!-- Registration Overlay -->
  <div id="registrationOverlay" class="registration-overlay">
    <div class="registration-box">
      <!-- Password Screen -->
      <div id="passwordScreen">
        <h1 class="registration-title">üîê Instructor Access</h1>
        <input type="password" id="passwordInput" class="password-input">
        <div id="errorMessage" class="error-message"></div>
        <button id="passwordBtn" class="password-btn">Submit Password</button>
        <button id="guestBtn" class="guest-btn">Play as Guest üëª</button>
      </div>

      <!-- Username Screen -->
      <div id="usernameScreen">
        <h1 class="registration-title">Enter Student Name</h1>
        <input type="text" id="usernameInput" class="username-input" placeholder="Your username..." maxlength="20">
        <div id="errorMessage" class="error-message"></div>
        <button id="submitBtn" class="submit-btn">Start!</button>
      </div>
    </div>
  </div>

  <!-- Control Buttons -->
  <div class="control-buttons">
    <button id="resetBtn" class="control-btn reset-btn" title="Reset Game">üîÑ</button>
  </div>

  <div class="control-buttons-bottom">
    <button id="showRegisterBtn" class="control-btn register-btn" title="Change Name">üë§</button>
  </div>

  <!-- SWIPE CONTAINER -->
  <div id="swipe-container"></div>
  <p id="message"></p>
  <script src="src/handleDOM.js"></script>
  <script src="src/sketch.js"></script>

</body>

</html>